generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "postgresql"
    url = env("DATABASE_URL")
}

model User {
    id              String   @id @default(cuid())
    name            String
    email           String   @unique
    password        String   
    phone           String?
    bio             String?
    avatar          String?
    role            String   @default("student") // 'student', 'company', 'admin'
    profileComplete Int      @default(0) // Percentual de completude do perfil
    emailVerified   Boolean  @default(false)
    createdAt       DateTime @default(now())
    updatedAt       DateTime @updatedAt

    company       Company?
}

model Company {
    id          String   @id @default(cuid())
    name        String   @unique
    email       String   @unique
    cnpj        String?  @unique
    logo        String?
    description String?  @db.Text
    website     String?
    phone       String?
    address     String?
    city        String?
    state       String?
    createdAt   DateTime @default(now())
    updatedAt   DateTime @updatedAt

    userId      String?    @unique
    user        User?      @relation(fields: [userId], references: [id], onDelete: Cascade)
}
